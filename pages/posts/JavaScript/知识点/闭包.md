---
title: 闭包
date: 2023-03-17
cover: https://fastly.jsdelivr.net/gh/YunYouJun/cdn/img/bg/astronaut.webp
categories:
  - JavaScript
  - 知识点
tags:
  - 闭包
---

## 1.闭包（closure）和对象

+ 共同特性：
>都可以对一个状态值进行疯转和创建行为

### 闭包的描述
*为什么要使用闭包？*
看看AI怎么回答
闭包是一种非常有用的编程技术，它可以帮助我们解决一些常见的问题，例如：
1. 保护变量：闭包可以将变量封装在函数内部，防止外部代码对其进行修改，从而保护变量的安全性。
2. 实现私有变量和方法：闭包可以创建私有变量和方法，这些变量和方法只能在函数内部访问，外部代码无法访问，从而实现了数据的封装和隐藏。
3. 延迟执行：闭包可以将函数作为参数传递给其他函数，从而实现延迟执行的效果。
4. 实现回调函数：闭包可以将函数作为参数传递给其他函数，从而实现回调函数的效果。
5. 优化性能：闭包可以避免全局变量的使用，从而减少内存的占用和提高代码的执行效率。
总之，闭包是一种非常有用的编程技术，可以帮助我们解决一些常见的问题，提高代码的可读性、可维护性和性能。

---

+ 闭包最大特点是：可以突破声明周期和作用域的限制，也就是时间和空间的限制
+ 突破生命周期：当一个外部函数内嵌一个内部函数是，如果内嵌函数引用了外部函数的变量，这个变量就会突破声明周期的限制，在函数执行后，仍然存在。
+ 突破作用域的限制：我们可以把一个内部函数返回成一个方法在外部调用

+ 是函数式编程常用的状态保存和引用手段

从表面上看闭包延长了变量的存在时间，让变量可以在声明的作用域之外调用，单从这个方面考虑的话，好像和使用对象没什么区别
可以通过对象来封装一个状态，并且封装一个方法来做用于这个状态值

**那么问题来了**：既然效果一样，闭包还有什么意义？使用对象不就行了
一个比较好的解释是：
>为它们在隐私（privacy）、状态拷贝（state cloning）和性能（performance）上。还是有差别的，而这些差别在结构性地处理值的问题上，具有不同的优劣势，

而闭包和对象的区分也将从这几个维度展现出来

####  1.属性的修改---隐私(privacy)
闭包的例子很常见，可以发现，除非通过接口，即外部函数中返回内部函数的方法，否则外部函数内部的值是**对外不可见**的。

*有什么好处？*
>可以细粒度地控制我们想要暴露或隐藏的属性，以及相关的操作。

*为什么要细粒度？*
这个需要结合具体的使用场景来具体分析：
+ 纯函数和不可变




